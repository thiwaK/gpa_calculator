<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPA Calculator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container">

        <div class="h1">GPA Calculator</div>

        <div class="card panel-info">
            <div class="card-header" id="gpa">
                GPA 0.0
            </div>
            <div class="card-body">
                <div class="row col-12" id="data_row"></div>
            </div>
        </div>
        <button type="button" onclick="addSubject();" class="btn btn-primary mt-2">Add Subject</button>
        <button type="button" onclick="removeLasetSub();" class="btn btn-primary mt-2">Remove Last Subject</button>
        <button type="button" onclick="calGPA();" class="btn btn-primary mt-2">Calculate</button>

        <div class="card-body">
            <div class="" id="data_row">

            </div>
        </div>

    </div>


    </div>
    <script type='text/javascript'>

        var subCount = 1;
        var totCredit = 0;
        var creditGrade = 0;
        var gpa = document.getElementById("gpa");

        function addSubject() {
            // data row
            var container = document.getElementById("data_row");

            // input group
            var input_group = document.createElement("class");
            input_group.classList = "input-group center-block mt-2";
            input_group.id = "input_group_" + subCount;
            container.appendChild(input_group);

            // append div for lbl subject
            var input_group_prepend = document.createElement("class");
            input_group_prepend.classList = "input-group-prepend d-none d-md-block";
            input_group.appendChild(input_group_prepend);

            // lbl subject
            var dev_span_sub_lbl = document.createElement("span");
            dev_span_sub_lbl.classList = "input-group-text";
            dev_span_sub_lbl.textContent = "Subject";
            input_group_prepend.appendChild(dev_span_sub_lbl);

            // input subject
            var input_sub = document.createElement("input");
            input_sub.classList = "form-control mr-3 col-md-3 ";
            input_sub.placeholder = "Subject";
            input_sub.ariaLabel = "Subject";
            input_group.appendChild(input_sub);

            // append div for lbl credit
            input_group_prepend = document.createElement("class");
            input_group_prepend.classList = "input-group-prepend d-none d-md-block";
            input_group.appendChild(input_group_prepend);

            // lbl credit
            var dev_span_credit_lbl = document.createElement("span");
            dev_span_credit_lbl.classList = "input-group-text";
            dev_span_credit_lbl.textContent = "Credits";
            input_group_prepend.appendChild(dev_span_credit_lbl);

            // input credit
            var input_credit = document.createElement("input");
            input_credit.classList = "form-control col-md-3 mr-3";
            input_credit.placeholder = "Credits";
            input_credit.ariaLabel = "Credits";
            input_credit.id = "credit_" + subCount;
            input_group.appendChild(input_credit);


            // append div for dropdown
            input_group_prepend = document.createElement("class");
            input_group_prepend.classList = "input-group-prepend";
            input_group.appendChild(input_group_prepend);

            // dropdown
            var dd_span = document.createElement("span");
            dd_span.classList = "select-wrapper";
            dd_span.appendChild(input_group_prepend);
            var grade_select = document.createElement("select");
            grade_select.classList = "grade form-control";
            grade_select.id = "grade_" + subCount;
            var option = document.createElement("option");

            option.value = 1; option.text = "A+"; option.value = 4.0; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 2; option.text = "A"; option.value = 4.0; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 3; option.text = "A-"; option.value = 3.7; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 4; option.text = "B+"; option.value = 3.3; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 5; option.text = "B"; option.value = 3.0; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 6; option.text = "B-"; option.value = 2.7; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 7; option.text = "C+"; option.value = 2.3; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 9; option.text = "C"; option.value = 2.0; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 10; option.text = "C-"; option.value = 1.7; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 11; option.text = "D+"; option.value = 1.3; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 12; option.text = "D"; option.value = 1.0; grade_select.appendChild(option); option = document.createElement("option");
            option.value = 13; option.text = "E"; option.value = 0; grade_select.appendChild(option);

            grade_select.appendChild(option);
            dd_span.appendChild(grade_select);
            input_group.appendChild(dd_span);

            subCount = subCount + 1;

        }

        function calGPA() {

            for (var i = 1; i < subCount; i++) {
                var credit = document.getElementById("credit_" + i).value;
                var grade = document.getElementById("grade_" + i).value;

                if (grade == null || grade == "") {
                    console.log(grade);
                }
                if (credit == null || credit == "") {
                    console.log(credit);
                }


                var tmp = parseInt(credit) * parseInt(grade);
                creditGrade = creditGrade + tmp;
                totCredit = totCredit + parseInt(credit);

                gpa.textContent = "GPA " + (creditGrade / totCredit);
                gpa.innerHTML = "GPA " + (creditGrade / totCredit);
                console.log(creditGrade / totCredit);

            }
        }

        function removeLasetSub() {

            if (subCount == 1) {
                return;
            }

            var item = document.getElementById("input_group_" + (subCount - 1));
            item.remove();
            subCount = subCount - 1;
        }

        addSubject();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>